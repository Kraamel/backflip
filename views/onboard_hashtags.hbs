<div class="main">
  <form class="pure-form pure-form-stacked" action="{{onboard.hashtagsAction}}" method="post">
    <input type="hidden" name="_id" value="{{record._id}}" />
    {{> form_errors}}
    <div class="pure-g">
      <div class="pure-u-1">
        <div class="grid-box">
          <label for="hashtag">{{__ "What are you good at? What do you love? Where do you belong?"}}</label>
          <input class="pure-input-1" id="hashtag" name="hashtag" type="text" placeholder="marketing, surfing, empathy">
        </div>
        <div class="grid-box">
          <ul id="hashtag-cloud">
            {{#record.hashtags}}
            {{> hashtag}}
            {{/record.hashtags}}
          </ul>
          <input type="hidden" name="hashtags" value="end_of_hashtag_cloud" />
          <p class="hashtag-cloud-howto">{{__ "The first three will be displayed in search results. Drag to add and reorder."}}</p>
        </div>
        <div class="grid-box">
          <h3>{{__ "Suggested"}}</h3>
          <ul id="hashtag-suggestions">
            {{#hashtagSuggestions}}
            {{> hashtag}}
            {{/hashtagSuggestions}}
          </ul>
        </div>
      </div>
    </div>
    <div class="bottom-buttons">
      <div class="pure-g">
        <div class="pure-u-1-2 pure-u-md-1-3">
          <div class="grid-box button-box">
            <a class="pure-button scale back-button" href="{{onboard.introAction}}">{{{__ "Back"}}}</a>
          </div>
        </div>
        <div class="pure-u-1-2 pure-u-md-2-3">
          <div class="grid-box button-box">
            <button type="submit" class="pure-button scale">{{{__ "Next"}}}</button>
          </div>
        </div>
      </div>
    </div>
  </form>
</div>
<script src="/javascripts/Sortable.min.js"></script>
<script>
  var cloudUl = document.getElementById('hashtag-cloud');
  var suggestionsUl = document.getElementById('hashtag-suggestions');
  var animationSpeed = 500;
  var cloud = Sortable.create(
    cloudUl,
    {
      group: {name: "hashtags", pull: false, put: true},
      animation: animationSpeed,
      draggable: '.hashtag',
      filter: ".js-remove",
      onFilter: function (evt) {
      	var item = evt.item, ctrl = evt.target;

      	if (Sortable.utils.is(ctrl, ".js-remove")) {  // Click on remove button
      		item.parentNode.removeChild(item); // remove sortable item
      	}
      }
    }
  );
  var suggestions = Sortable.create(
    suggestionsUl,
    {
      group: {name: "hashtags", pull: true, put: false},
      sort: false,
      animation: animationSpeed,
      draggable: '.hashtag',
      filter: ".js-remove",
      onFilter: function (evt) {
      	var item = evt.item, ctrl = evt.target;

      	if (Sortable.utils.is(ctrl, ".js-remove")) {  // Click on remove button
      		item.parentNode.removeChild(item); // remove sortable item
      	}
      }
    }
  );
</script>
